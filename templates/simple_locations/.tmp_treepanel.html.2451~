{% load mptt_tags %}
<ul class="root" id="tree">
    {% recursetree nodes %}
    <li>
        <input style="display:none;"
               type='checkbox'
               id="{{ node.id }}"
               value="{{ node.id }}"
               name='location'/>
        <a id="anchor_{{ node.id }}"
           style="padding-left:5px;" onClick="edit({{node.id}})" href='javascript:void(0)'>
            {{ node.name }}
            <img style="display:none;cursor:pointer;" border='0' class="confirm delete"
                 del_func="node_delete({{node.id}})" src='/static/simple_locations/images/delete.png'/>
        </a>
        </input>
        <script type="text/javascript">
            children[{{ node.id }}] = [{% for child in node.get_children %}{{ child.id }},{% endfor %}];
            {% if node.parent %}
                parent[{{ node.id }}] = "{{ node.parent.id }}";
            {% endif %}
        </script>
        <ul class="children">
            {% if not node.is_leaf_node %}
                {{ children }}
            {% endif %}
            <li>
                <a
                        style="font-size:10px;padding-left:5px;"
                        href="javascript:void(0)"
                        onClick="add_node({{node.id}})">
                    Add New</a>
            </li>
        </ul>

    </li>
    {% endrecursetree %}
</ul>
